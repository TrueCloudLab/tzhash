#!/bin/bash
#tmpfile=$(mktemp /tmp/random-file.XXXXXX)
#size=$1
#dd if=/dev/urandom of=$tmpfile bs=$size count=1

tmpfile=$1

go build ./cmd/tzsum && \
for impl in avx avx2 avx2inline purego; do
	echo $impl implementation:
	/usr/bin/env time -f "time: %e seconds" ./tzsum -name $tmpfile -impl $impl
	echo
done
